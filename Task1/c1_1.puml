@startuml C1_Основное_решение
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

title Контекстная диаграмма — Основное решение (Мониторинг скота)

' ==== Пользователи ====
Person(фермер, "Фермер", "Следит за состоянием животных и кормлением")
Person(ветеринар, "Ветеринар", "Получает уведомления о здоровье животных")
Person(менеджер, "Менеджер", "Аналитика и отчёты")
Person(дежурный, "Дежурный на ферме", "Оперативные уведомления при отсутствии интернета")

' ==== Системы ====
System_Boundary(агротех, "АгроТех Х - Цифровая платформа") {
    System(erp, "ERP (1С:Агро)", "Склад, финансы, кадры")
    System(веб, "Веб-портал", "Управление хозяйством")
    System(мобильное, "Мобильное приложение", "Для агрономов и полевых сотрудников")
}

System_Ext(видеокамеры, "Видеокамеры и IoT-датчики", "Разные производители")
System_Ext(уведомления, "Система уведомлений", "SMS/Email/Push")

System_Boundary(мониторинг, "Платформа мониторинга скота (MVP)") {
    System(центральный, "Центральный сервер мониторинга", "Сбор данных, аналитика, API")
    System(агент, "Агенты на фермах", "Edge-обработка видео, связь с датчиками, кэширование данных")
}

' ==== Связи ====
Rel(фермер, центральный, "Просмотр состояния животных, отчёты")
Rel(ветеринар, центральный, "Оповещения о болезнях и аномалиях")
Rel(менеджер, центральный, "Аналитика, отчёты")
Rel(дежурный, агент, "Локальные уведомления при отсутствии связи")

Rel(агент, центральный, "Синхронизация данных (до 10 мин задержки)")
Rel(агент, видеокамеры, "Получение потоков видео и данных от IoT")

Rel(центральный, erp, "Данные о запасах корма, интеграция")
Rel(центральный, уведомления, "Отправка SMS/Email/Push")
Rel(фермер, веб, "Доступ к ERP данным (через портал)")
Rel(фермер, мобильное, "Доступ через мобильное приложение")

@enduml
