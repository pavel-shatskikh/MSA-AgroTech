@startuml C1_Альтернативное_решение
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Context.puml

title Контекстная диаграмма — Альтернативное решение (Локальная аналитика)

' ==== Пользователи ====
Person(фермер, "Фермер", "Следит за состоянием животных и кормлением")
Person(ветеринар, "Ветеринар", "Получает уведомления о здоровье животных")
Person(менеджер, "Менеджер", "Аналитика и отчёты")
Person(дежурный, "Дежурный на ферме", "Оперативные уведомления при отсутствии интернета")

' ==== Системы ====
System_Boundary(агротех, "АгроТех Х - Цифровая платформа") {
    System(erp, "ERP (1С:Агро)", "Склад, финансы, кадры")
    System(веб, "Веб-портал", "Управление хозяйством")
    System(мобильное, "Мобильное приложение", "Для агрономов и полевых сотрудников")
}

System_Ext(видеокамеры, "Видеокамеры и IoT-датчики", "Разные производители")
System_Ext(уведомления, "Система уведомлений", "SMS/Email/Push")

System_Boundary(фермы, "Фермы с локальными агентами") {
    System(агент, "Агент на ферме", "Полная обработка видео, локальная аналитика, управление кормушками")
    SystemDb(локальное_хранилище, "Локальная БД", "Сохранение аналитики, кэш данных")
}

System(центральный, "Центральный сервер мониторинга (упрощённый)", "Агрегированные данные, отчёты")

' ==== Связи ====
Rel(фермер, агент, "Доступ к аналитике через локальную панель/мобильное приложение")
Rel(ветеринар, агент, "Локальные уведомления о болезнях")
Rel(дежурный, агент, "Уведомления при ЧП")

Rel(агент, центральный, "Периодическая отправка агрегированных данных (до 1 раза в час)")
Rel(агент, видеокамеры, "Получение потоков видео и данных от IoT")
Rel(агент, уведомления, "SMS/Email/Push на месте")

Rel(центральный, erp, "Синхронизация с ERP (данные о кормах)")
Rel(фермер, веб, "Доступ к ERP данным (через портал)")
Rel(фермер, мобильное, "Доступ через мобильное приложение")

@enduml
